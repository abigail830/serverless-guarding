{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Metadata": {
    "AWS::CloudFormation::Designer": {
      "5b602629-4ca9-4375-9c12-0e1e4b353665": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": -190,
          "y": -60
        },
        "z": 0,
        "embeds": [],
        "dependson": [
          "22d09537-2f4c-4007-b048-ba2a0de72ed6"
        ]
      },
      "e56afdcd-9fad-40ce-9b03-acdef9e28fb2": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": -190,
          "y": 10
        },
        "z": 0,
        "embeds": [],
        "isassociatedwith": [
          "5b602629-4ca9-4375-9c12-0e1e4b353665"
        ]
      },
      "fe7ae61a-8466-4f47-b9ec-8371ace17da0": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": -50,
          "y": -40
        },
        "z": 0,
        "embeds": [],
        "dependson": [
          "e56afdcd-9fad-40ce-9b03-acdef9e28fb2"
        ]
      },
      "f4fcb3ea-a5db-46f0-b10e-3ec5b721a24e": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": -450,
          "y": -30
        },
        "z": 0,
        "embeds": []
      },
      "22d09537-2f4c-4007-b048-ba2a0de72ed6": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": -350,
          "y": -30
        },
        "z": 0,
        "embeds": [],
        "isassociatedwith": [
          "f4fcb3ea-a5db-46f0-b10e-3ec5b721a24e"
        ]
      }
    }
  },
  "Resources": {
    "SNST42V9A": {
      "Type": "AWS::SNS::Topic",
      "Properties": {
        "Subscription": [
          {
            "Endpoint": {
              "Fn::GetAtt": [
                "JAVASQSQ1K6KA",
                "Arn"
              ]
            },
            "Protocol": "sqs"
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "5b602629-4ca9-4375-9c12-0e1e4b353665"
        }
      },
      "DependsOn": [
        "JAVASQSPOLICY"
      ]
    },
    "SNSTPJPHT": {
      "Type": "AWS::SNS::TopicPolicy",
      "Properties": {
        "PolicyDocument": {
          "Id": "MyTopicPolicy",
          "Version": "2012-10-17",
          "Statement": [
            {
              "Sid": "Statement-id",
              "Effect": "Allow",
              "Principal": {
                "Service": "s3.amazonaws.com"
              },
              "Action": "sns:Publish",
              "Resource": {
                "Ref": "SNST42V9A"
              },
              "Condition": {
                "ArnLike": {
                  "aws:SourceArn": {
                    "Fn::Join": [
                      "",
                      [
                        "arn:aws:s3:::",
                        "paramBucketName"
                      ]
                    ]
                  }
                }
              }
            }
          ]
        },
        "Topics": [
          {
            "Ref": "SNST42V9A"
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "e56afdcd-9fad-40ce-9b03-acdef9e28fb2"
        }
      }
    },
    "S3B2C19T": {
      "Type": "AWS::S3::Bucket",
      "Properties": {
        "AccessControl": "BucketOwnerFullControl",
        "BucketName": {
          "Ref": "paramBucketName"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "fe7ae61a-8466-4f47-b9ec-8371ace17da0"
        }
      },
      "DependsOn": [
        "SNSTPJPHT"
      ]
    },
    "JAVASQSQ1K6KA": {
      "Type": "AWS::SQS::Queue",
      "Properties": {},
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "f4fcb3ea-a5db-46f0-b10e-3ec5b721a24e"
        }
      }
    },
    "JAVASQSPOLICY": {
      "Type": "AWS::SQS::QueuePolicy",
      "Properties": {
        "PolicyDocument": {
          "Version": "2012-10-17",
          "Id": "MyQueuePolicy",
          "Statement": [
            {
              "Sid": "Allow-SNS-SendMessage",
              "Effect": "Allow",
              "Principal": {
                "Service": "sns.amazonaws.com"
              },
              "Action": [
                "sqs:SendMessage"
              ],
              "Resource": {
                "Fn::GetAtt": [
                  "JAVASQSQ1K6KA",
                  "Arn"
                ]
              }
            }
          ]
        },
        "Queues": [
          {
            "Ref": "JAVASQSQ1K6KA"
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "22d09537-2f4c-4007-b048-ba2a0de72ed6"
        }
      }
    }
  },
  "Parameters": {
    "paramBucketName": {
      "Type": "String",
      "Description": "CloneBucket"
    }
  }
}